---

menu: 工作台
libs: dropzone,nouislider, autosize, tabler-flags, tabler-payments, litepicker, tom-select
layout: default
---

<link href="https://unpkg.com/video.js@8.12.0/dist/video-js.css" rel="stylesheet">
<script src="https://unpkg.com/video.js@8.12.0/dist/video.js"></script>

<style>

	 /*隐藏刷新界面后默认出现的播放按钮*/
	 .video-js .vjs-big-play-button {
		  display: none;
	 }

	/*隐藏单击视频操作*/
	 .video-js .vjs-tech {
		  pointer-events: none;
	 }

	 /*设置全屏键位置在右下角*/
	 .video-js .vjs-fullscreen-control {
		  position: absolute;
		  bottom: 0;
		  right: 0;
	 }

	 /*设置音量键位置在左下角*/
	 .video-js .vjs-volume-panel {
		  position: absolute;
		  bottom: 0;
		  left: 0;
	 }

	 /* 设置显示时间的字体大小 */
	 .time-display {
		  font-size: 20px;  /* 你可以根据需要调整这个值 */
	 }

	 #video_left {
		  position: absolute;
		  top: 28%;
		  left: 20%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_left {
		  position: absolute;
		  top: 14%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 20%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_leftwheel {
		  position: absolute;
		  top: 58%;
		  left: 20%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_leftwheel {
		  position: absolute;
		  top: 44%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 20%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_insidecar {
		  position: absolute;
		  top: 88%;
		  left: 20%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_insidecar {
		  position: absolute;
		  top: 74%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 20%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_right {
		  position: absolute;
		  top: 28%;
		  left: 94%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_right {
		  position: absolute;
		  top: 14%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 94%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_rightwheel {
		  position: absolute;
		  top: 58%;
		  left: 94%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_rightwheel {
		  position: absolute;
		  top: 44%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 94%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_dashboard {
		  position: absolute;
		  top: 88%;
		  left: 94%;
		  width: 285px;
		  height: 160px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_dashboard {
		  position: absolute;
		  top: 74%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 94%;
		  width: 285px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 5px 10px 15px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
	 #video_frontofcar {
		  position: absolute;
		  top: 70.5%;
		  left: 63.25%;
		  width: 544px;
		  height: 305px;
		  transform: translate(-80%, -60%);
	 }
	 #title_video_frontofcar {
		  position: absolute;
		  top: 44%;  /* 调整标题框的位置，使其位于视频的正上方 */
		  left: 63.25%;
		  width: 544px;
		  transform: translate(-80%, -60%);
		  background-color: #d3d3d3;  /* 设置标题框的背景颜色 */
		  padding: 8px 10px 12px 10px;  /* 设置标题框的内边距 */
		  text-align: center;  /* 设置标题居中显示 */
		  border: 2px solid #000;  /* 添加边框 */
		  border-radius: 6px;  /* 设置边框圆角 */
		  font-size: 17px;  /* 设置标题字体大小 */
		  font-weight: bold;  /* 设置标题字体加粗 */
	 }
</style>


<div id="title_video_left">车辆左侧</div>
<video id="video_left" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_leftwheel">车辆左前轮</div>
<video id="video_leftwheel" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_insidecar">车内</div>
<video id="video_insidecar" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_right">车辆右侧</div>
<video id="video_right" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_rightwheel">车辆右前轮</div>
<video id="video_rightwheel" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_dashboard">仪表盘</div>
<video id="video_dashboard" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<div id="title_video_frontofcar">车辆前方</div>
<video id="video_frontofcar" class="video-js" controls preload="auto">
  <source src="https://sample-videos.com/video321/mp4/720/big_buck_bunny_720p_1mb.mp4" type="video/mp4" />
</video>

<script>
  document.addEventListener('DOMContentLoaded', function() {
	 // 每10秒执行一次检测登录状态的函数
	 setInterval(checkLoginStatus, 10000);
  });
  function checkLoginStatus() {
	 // 发送 AJAX 请求到服务器
	 // 例如，使用 fetch API 或者 XMLHttpRequest
	 fetch('http://localhost:9090/login/checkCookie',{
		method: 'GET',
		credentials: 'include'
	 })
		.then(response => {
		  // 处理服务器响应，这里可以根据服务器返回的数据进行相应的逻辑处理
		  if (response.ok) {
			 return response.json();
		  } else {
			 window.location.href = '{{ site.base }}/sign-in.html';
			 throw new Error('Network response was not ok.');
		  }
		})
		.then(data => {
		  // 在这里处理服务器返回的数据，例如检查登录状态
		  if (data.code===0) {

		  } else {
			 window.location.href = '{{ site.base }}/sign-in.html';
		  }
		})
		.catch(error => {
		  // 处理错误
		  console.error('There was a problem with the fetch operation:', error);
		  window.location.href = '{{ site.base }}/sign-in.html';
		});
  }
</script>

<link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<!-- 创建一个新的控制条元素 -->
<input type="range" min="0" max="100" value="0" id="masterControl"
		 style="position: absolute; top: 690px; left: 475px; z-index: 1000;
width: 415px; height: 25px;">

<!-- 创建一个元素来显示时间 -->
<p id="timeDisplay" class="time-display" style="position: absolute; top: 667px; left: 475px;"></p>

<!-- 创建播放/暂停按钮 -->
<button id="playPauseButton" style="position: absolute; top: 676px; left: 345px;">
  <i id="playPauseIcon" class="bi bi-play-fill" style="font-size: 26px;"></i>
</button>

<!-- 创建停止按钮 -->
<button id="stopButton" style="position: absolute; top: 676px; left: 410px;">
  <i class="bi bi-stop-fill" style="font-size: 26px;"></i>
</button>

<script>
  const url = 'http://localhost:9090/history/initialize?'

  fetch(url, {
	 method: 'GET',
	 credentials: 'include'
  })
	 .then(response => {
		if (response.ok) {
		  return response.json();
		}

		throw new Error('Network response was not ok.');
	 })
	 .then(data => {
		console.log(data);
		if(data.code===0){
		}
	 })
	 .catch(error => {
		console.error('Error:', error);
	 });
  // 获取所有的视频元素
  var players = [
	 videojs('video_left', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_leftwheel', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_insidecar', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_right', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_rightwheel', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_dashboard', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } }),
	 videojs('video_frontofcar', { controlBar: { playToggle: false, pictureInPictureToggle: false, fullscreenToggle: true, volumePanel: false, currentTimeDisplay: false, timeDivider: false, durationDisplay: false, remainingTimeDisplay: false, progressControl: false }, userActions: { hotkeys: false } })
  ];

  // 遍历所有的视频元素
  players.forEach(function(player) {
	 // 将每个视频的音量设置为0
	 player.volume(0);
  });


  // 获取新的进度条元素
  var masterControl = document.getElementById('masterControl');

  // 计算最大时长
  var maxDuration = 7;

  // 获取显示时间的元素
  var timeDisplay = document.getElementById('timeDisplay');

  // 获取播放/暂停按钮和图标元素
  var playPauseButton = document.getElementById('playPauseButton');
  var playPauseIcon = document.getElementById('playPauseIcon');



  // 为播放/暂停按钮添加点击事件监听器
  playPauseButton.addEventListener('click', function() {
	 // 遍历所有的视频元素
	 players.forEach(function(player) {
		// 判断视频是否正在播放
		if (player.paused()) {
		  // 如果视频暂停，那么播放视频，并将图标设置为暂停图标
		  player.play();
		  playPauseIcon.className = 'bi bi-pause-fill';
		} else {
		  // 如果视频播放，那么暂停视频，并将图标设置为播放图标
		  player.pause();
		  playPauseIcon.className = 'bi bi-play-fill';
		}
	 });
  });

  // 获取停止按钮元素
  var stopButton = document.getElementById('stopButton');

  // 为停止按钮添加点击事件监听器
  stopButton.addEventListener('click', function() {
	 // 遍历所有的视频元素
	 players.forEach(function(player) {
		// 停止视频
		player.pause();
		// 将视频的播放进度设置为0
		player.currentTime(0);
	 });

	 // 将进度条的值设置为0
	 masterControl.value = 0;
	 // 将播放/暂停按钮的图标设置为播放图标
	 playPauseIcon.className = 'bi bi-play-fill';
	 // 将显示的时间设置为初始状态
	 timeDisplay.textContent = '0:0';
  });

  // 为新的进度条元素添加事件监听器
  masterControl.addEventListener('input', function() {
	 // 获取用户选择的时间
	 var selectedTime = masterControl.value;

	 // 将选择的时间转换为适合设置视频播放进度的值
	 var value = selectedTime / masterControl.max;
	 var timevalue = value * maxDuration;

	 // 遍历所有的视频元素，将每个视频的播放进度设置为进度条的值
	 players.forEach(function(player) {
		if (timevalue> player.duration()){
		  player.currentTime(player.duration());
		}
		else{
		  player.currentTime(timevalue);
		}
	 });

	 });


// 遍历所有的视频元素，为每个视频元素添加timeupdate事件监听器
	 players.forEach(function(player) {
		player.on('timeupdate', function() {
		  // 获取当前播放时间，并将其转换为适合设置进度条的值
		  var value = player.currentTime() / player.duration() * masterControl.max;

		  // 更新进度条的值
		  masterControl.value = value;

		// 计算出当前播放时间对应的分钟和秒数
		  var currentMinutes = Math.floor(player.currentTime() / 60);
		  var currentSeconds = Math.floor(player.currentTime() % 60);

		  // 计算出视频的总时长对应的分钟和秒数
		  var totalMinutes = Math.floor(player.duration() / 60);
		  var totalSeconds = Math.floor(player.duration() % 60);

		  // 更新显示的时间
		  timeDisplay.textContent = currentMinutes + ':' + currentSeconds + '/' + totalMinutes + ':' + totalSeconds;
		});
  });

  // 遍历所有的视频元素
	 players.forEach(function(player) {
		// 监听播放器的click事件
		player.on('click', function(event) {
		  // 阻止事件的默认行为
		  event.preventDefault();
		});
		// 将每个视频的当前播放时间设置为0
		player.currentTime(0);
	 });

  // 遍历所有的视频元素
  players.forEach(function(player) {
	 // 监听播放器的ended事件
	 player.on('ended', function() {
		// 将播放/暂停按钮的图标设置为播放图标
		playPauseIcon.className = 'bi bi-play-fill';
	 });
  });
</script>